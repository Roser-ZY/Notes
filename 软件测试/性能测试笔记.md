[TOC]

## 一、内存占用

内存占用属于比较常规且简单的测试，但需要区分虚拟内存和物理内存。一般而言通常选择虚拟内存来统计代码的内存损耗，因为在一些内存较小的机器上，如果启动的其他进程较多，会由于换页导致测试得到的物理内存存在机器差异，而虚拟内存一般不会出现机器差异。

### 1.1 *C++* 内存占用测试代码样例



## 二、执行效率

测试目标代码（一般是函数）执行效率时，由于很难找到纯净的测试环境，以及测试代码往往会放在循环中以记录多组数据，因此会经常出现 *CPU* 占用波动并导致打点时间也存在较大波动。

由于上述问题的存在，因此在进行执行效率可视化时，需要注意图表的选择：

- 如果测试量在百万级以上，可以使用折线图或柱状图（此时折线图和柱状图的观察效果基本一致）。

- 更推荐的做法是统计某个执行时间区间的数据量，并绘制成数量图，横坐标为执行时间。

  这种图表更能够看出时间分布，并且能够在图表中给出一些统计量，例如平均值，中位数，众数等。